[gd_scene load_steps=16 format=3 uid="uid://c3dr1gjbwx8mc"]

[ext_resource type="Script" uid="uid://424xd4oq24t1" path="res://Scripts/GameOver.gd" id="1_uib17"]
[ext_resource type="Shader" uid="uid://elcri4qgg1s8" path="res://addons/flowerwall_postprocess/shaders/dithering.gdshader" id="2_8710x"]
[ext_resource type="VideoStream" uid="uid://bc2sl5c6edwru" path="res://Video/Glasses.ogv" id="2_k52d1"]
[ext_resource type="Material" uid="uid://cw8i56a85bd8k" path="res://addons/flowerwall_postprocess/shaders/blurx_shader.material" id="3_a14ly"]
[ext_resource type="AudioStream" uid="uid://gxpqmdrj3dse" path="res://Audio/SpectrogramGameOver.wav" id="3_ktc4i"]
[ext_resource type="Material" uid="uid://2inluedv57nr" path="res://addons/flowerwall_postprocess/shaders/blury_shader.material" id="4_tr7xh"]
[ext_resource type="Shader" uid="uid://b4kwy80l03ffq" path="res://addons/flowerwall_postprocess/shaders/crt.gdshader" id="5_w0gmt"]
[ext_resource type="Material" uid="uid://cuy3tmwetpuo1" path="res://addons/flowerwall_postprocess/shaders/bloom_shader.material" id="6_6wu1n"]
[ext_resource type="Theme" uid="uid://bee3p0mwngmj1" path="res://Resources/MainMenuTheme.tres" id="9_a14ly"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_aa261"]
shader = ExtResource("2_8710x")
shader_parameter/color_compression = 5.0
shader_parameter/downscaling_strength = 2.0

[sub_resource type="FastNoiseLite" id="FastNoiseLite_bdvmp"]
noise_type = 0
frequency = 1.0

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_5ywbh"]
noise = SubResource("FastNoiseLite_bdvmp")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_i4swy"]
shader = ExtResource("5_w0gmt")
shader_parameter/enable_grain = true
shader_parameter/enable_curving = true
shader_parameter/enable_scanlines = true
shader_parameter/enable_chromatic_aberration = true
shader_parameter/enable_rgb_grid = false
shader_parameter/enable_vhs_wiggle = true
shader_parameter/enable_vignette = true
shader_parameter/brightness_multiplier = 1.05
shader_parameter/grain_strength = 0.30000000447036
shader_parameter/curve_power = 1.015
shader_parameter/vignette_size = 1.3
shader_parameter/vignette_smoothness = 5.0
shader_parameter/scanlines_interval = 2.0
shader_parameter/scanline_opacity = 0.15
shader_parameter/scanline_thickness = 1.0
shader_parameter/chromatic_aberration_strength = 1.0
shader_parameter/noise_texture = SubResource("NoiseTexture2D_5ywbh")
shader_parameter/wiggle = 0.010000000475

[sub_resource type="Gradient" id="Gradient_uib17"]
colors = PackedColorArray(0, 0, 0, 1, 0, 0.005833411, 0.35, 1)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_rdiyk"]
gradient = SubResource("Gradient_uib17")
fill = 1
fill_from = Vector2(0.5, 0.5)
fill_to = Vector2(0, 0)

[node name="GameOver" type="Control"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("1_uib17")

[node name="dithering" type="CanvasLayer" parent="."]
layer = 99

[node name="dither" type="ColorRect" parent="dithering"]
material = SubResource("ShaderMaterial_aa261")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2

[node name="preblur_x" type="CanvasLayer" parent="."]
layer = 100

[node name="x_blur" type="ColorRect" parent="preblur_x"]
material = ExtResource("3_a14ly")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 4
size_flags_vertical = 4
mouse_filter = 2

[node name="preblur_y" type="CanvasLayer" parent="."]
layer = 100

[node name="y_blur" type="ColorRect" parent="preblur_y"]
material = ExtResource("4_tr7xh")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 4
size_flags_vertical = 4
mouse_filter = 2

[node name="CRT" type="CanvasLayer" parent="."]
layer = 102

[node name="crt_shader" type="ColorRect" parent="CRT"]
material = SubResource("ShaderMaterial_i4swy")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2

[node name="post_bloom" type="CanvasLayer" parent="."]
layer = 103

[node name="bloom" type="ColorRect" parent="post_bloom"]
material = ExtResource("6_6wu1n")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 4
size_flags_vertical = 4
mouse_filter = 2

[node name="CircleFade" type="ColorRect" parent="."]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0, 0, 0.27450982, 1)

[node name="ColorRect" type="TextureRect" parent="."]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
texture = SubResource("GradientTexture2D_rdiyk")
expand_mode = 1
stretch_mode = 5

[node name="ButtonContainer" type="VBoxContainer" parent="."]
layout_mode = 1
anchors_preset = -1
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -44.0
offset_right = 44.0
grow_horizontal = 2
grow_vertical = 2
alignment = 1
metadata/_edit_use_anchors_ = true

[node name="Retry" type="Button" parent="ButtonContainer"]
layout_mode = 2
theme = ExtResource("9_a14ly")
theme_override_font_sizes/font_size = 32
text = "Retry"

[node name="MainMenu" type="Button" parent="ButtonContainer"]
layout_mode = 2
theme = ExtResource("9_a14ly")
theme_override_font_sizes/font_size = 32
text = "Main Menu"

[node name="BlackBars" type="ColorRect" parent="."]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0, 0, 0, 1)

[node name="VideoAspect" type="AspectRatioContainer" parent="BlackBars"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="VideoStreamPlayer" type="VideoStreamPlayer" parent="BlackBars/VideoAspect"]
layout_mode = 2
stream = ExtResource("2_k52d1")
autoplay = true
expand = true

[node name="AudioLost" type="Label" parent="."]
visible = false
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme_override_colors/font_color = Color(0, 0, 0, 1)
theme_override_font_sizes/font_size = 64
text = "Audio Lost"
horizontal_alignment = 1
vertical_alignment = 1

[node name="AudioStreamPlayer" type="AudioStreamPlayer" parent="."]
stream = ExtResource("3_ktc4i")
autoplay = true
bus = &"Videos"

[node name="DialtoneTime" type="Timer" parent="."]
wait_time = 3.0
one_shot = true
autostart = true

[connection signal="pressed" from="ButtonContainer/Retry" to="." method="retry_pressed"]
[connection signal="pressed" from="ButtonContainer/MainMenu" to="." method="main_menu_pressed"]
[connection signal="finished" from="AudioStreamPlayer" to="." method="audio_finished"]
[connection signal="timeout" from="DialtoneTime" to="." method="dialtone"]
